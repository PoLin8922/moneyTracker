# 統一類別管理系統 - 測試指南 🧪

## 📋 測試清單

本指南協助您驗證統一類別管理系統的所有功能是否正常運作。

---

## 🎯 測試前準備

### 1. 確認資料庫遷移
```sql
-- 在 Neon Console 執行
SELECT COUNT(*) as total_categories FROM ledger_categories;
-- 應該看到至少 14 個預設類別 (10 支出 + 4 收入) × 用戶數
```

### 2. 啟動開發伺服器
```bash
npm run dev
```

---

## 🧪 測試案例

### 測試 1: 類別管理對話框 - 基本功能

#### 1.1 開啟對話框
- [ ] 進入「記帳簿」頁面
- [ ] 點擊「新增記錄」或現有記錄
- [ ] 在類別選擇旁找到「管理」按鈕 (齒輪圖示)
- [ ] 點擊「管理」按鈕
- [ ] 應該看到「類別管理」對話框

#### 1.2 查看預設類別
**支出類別:**
- [ ] 點擊「支出」分頁
- [ ] 應該看到至少 10 個類別：
  - 餐飲 (🍴)
  - 交通 (🚗)
  - 購物 (🛍️)
  - 娛樂 (🎮)
  - 醫療 (❤️)
  - 教育 (🎓)
  - 居家 (🏠)
  - 保險 (🛡️)
  - 投資 (📈)
  - 其他支出 (➖)

**收入類別:**
- [ ] 點擊「收入」分頁
- [ ] 應該看到至少 4 個類別：
  - 薪資 (💼)
  - 獎金 (🏆)
  - 利息 (%)
  - 其他收入 (➕)

#### 1.3 新增支出類別
- [ ] 在「支出」分頁點擊「新增類別」
- [ ] 輸入類別名稱，例如：「零食」
- [ ] 選擇圖示，例如：Cookie
- [ ] 點擊「確認」
- [ ] 應該看到「零食」出現在類別列表中
- [ ] 關閉對話框
- [ ] 重新開啟對話框
- [ ] 「零食」類別應該仍然存在

#### 1.4 新增收入類別
- [ ] 切換到「收入」分頁
- [ ] 點擊「新增類別」
- [ ] 輸入類別名稱，例如：「兼職」
- [ ] 選擇圖示，例如：Briefcase
- [ ] 點擊「確認」
- [ ] 應該看到「兼職」出現在類別列表中

#### 1.5 刪除類別
- [ ] 找到剛新增的「零食」類別
- [ ] 點擊類別卡片右上角的垃圾桶圖示
- [ ] 應該看到確認對話框
- [ ] 點擊「刪除」
- [ ] 「零食」類別應該從列表中消失

---

### 測試 2: 記帳簿 - 類別同步

#### 2.1 在記帳簿新增記錄
- [ ] 關閉類別管理對話框
- [ ] 在記帳簿新增一筆支出記錄
- [ ] 選擇類別時，應該看到剛在類別管理中設定的類別
- [ ] 選擇任一類別並儲存

#### 2.2 收入記錄類別
- [ ] 新增一筆收入記錄
- [ ] 在類別選擇中，應該只看到收入類別 (薪資、獎金、利息、其他收入、兼職)
- [ ] 不應該看到支出類別

#### 2.3 支出記錄類別
- [ ] 新增一筆支出記錄
- [ ] 在類別選擇中，應該只看到支出類別
- [ ] 不應該看到收入類別

---

### 測試 3: 現金流規劃 - 類別整合

#### 3.1 查看類別選項
- [ ] 進入「現金流規劃」頁面
- [ ] 在固定支出或額外收入區塊點擊「新增類別」
- [ ] 應該看到統一類別庫的所有支出類別
- [ ] 應該包含在類別管理中新增的類別

#### 3.2 新增預算類別
- [ ] 在類別選擇器中輸入新類別名稱，例如：「寵物開銷」
- [ ] 選擇圖示，例如：Dog
- [ ] 確認新增
- [ ] 應該看到「寵物開銷」出現在預算分配列表

#### 3.3 驗證同步
- [ ] 返回「記帳簿」頁面
- [ ] 開啟類別管理對話框
- [ ] 在「支出」分頁應該看到「寵物開銷」類別
- [ ] 這表示從預算系統新增的類別已同步到統一類別庫

---

### 測試 4: 存錢罐 - 類別整合

#### 4.1 建立存錢罐
- [ ] 進入存錢罐功能
- [ ] 建立一個新存錢罐，例如：「旅遊基金」，目標 50,000
- [ ] 新增存款（任意金額）

#### 4.2 類別分配
- [ ] 點擊存錢罐查看詳情
- [ ] 切換到「類別分配」分頁
- [ ] 點擊「新增類別」
- [ ] 應該看到統一類別庫的所有支出類別
- [ ] 應該包含之前新增的「寵物開銷」等類別

#### 4.3 新增存錢罐類別
- [ ] 輸入新類別名稱，例如：「機票」
- [ ] 選擇圖示，例如：Plane
- [ ] 確認新增
- [ ] 應該看到「機票」出現在分配列表
- [ ] 設定分配百分比，例如：40%

#### 4.4 驗證同步
- [ ] 返回「記帳簿」頁面
- [ ] 開啟類別管理對話框
- [ ] 在「支出」分頁應該看到「機票」類別
- [ ] 這表示從存錢罐系統新增的類別已同步到統一類別庫

---

### 測試 5: 跨系統一致性

#### 5.1 類別顯示一致性
- [ ] 在類別管理新增類別「健身」
- [ ] 檢查記帳簿：應該立即看到「健身」
- [ ] 檢查現金流規劃：應該看到「健身」
- [ ] 檢查存錢罐分配：應該看到「健身」

#### 5.2 類別刪除行為
- [ ] 在類別管理刪除「健身」類別
- [ ] 檢查記帳簿：「健身」應該從選項中消失
- [ ] 檢查現金流規劃：「健身」應該從選項中消失
- [ ] 檢查存錢罐分配：「健身」應該從選項中消失
- [ ] **重要**: 已經使用「健身」類別的舊記錄應該仍然保留類別名稱

#### 5.3 類別顏色和圖示
- [ ] 在類別管理新增類別「飲料」，選擇特定圖示和顏色
- [ ] 在記帳簿中使用「飲料」類別
- [ ] 檢查記錄顯示的圖示和顏色是否與設定一致
- [ ] 在現金流規劃中使用「飲料」類別
- [ ] 檢查顯示的圖示和顏色是否一致
- [ ] 在存錢罐分配中使用「飲料」類別
- [ ] 檢查顯示的圖示和顏色是否一致

---

### 測試 6: 邊界情況

#### 6.1 重複類別名稱
- [ ] 嘗試新增已存在的類別名稱，例如「餐飲」
- [ ] 應該看到錯誤提示：「類別名稱已存在」
- [ ] 類別不應該被重複新增

#### 6.2 空白類別名稱
- [ ] 嘗試新增空白名稱的類別
- [ ] 應該無法提交或看到錯誤提示

#### 6.3 特殊字元
- [ ] 嘗試新增包含特殊字元的類別，例如：「@#$%」
- [ ] 系統應該接受或給予明確的限制說明

#### 6.4 長類別名稱
- [ ] 嘗試新增很長的類別名稱 (>20 字元)
- [ ] 檢查在各個介面中的顯示是否正常
- [ ] 不應該破壞版面

---

### 測試 7: 效能測試

#### 7.1 大量類別
- [ ] 新增 20+ 個類別
- [ ] 類別管理對話框應該流暢滾動
- [ ] 類別選擇器應該快速載入

#### 7.2 切換速度
- [ ] 在「收入」和「支出」分頁間快速切換
- [ ] 應該立即切換，無明顯延遲

#### 7.3 搜尋功能 (如果有實作)
- [ ] 在類別選擇器中搜尋類別
- [ ] 應該快速過濾結果

---

## ✅ 測試通過標準

### 必須通過的測試
- ✅ 所有預設類別正確顯示
- ✅ 可以新增支出/收入類別
- ✅ 可以刪除自訂類別
- ✅ 三個系統都能看到統一類別
- ✅ 新增類別會同步到統一類別庫
- ✅ 刪除類別不影響已有記錄
- ✅ 不能新增重複類別名稱

### 建議通過的測試
- ⭐ 類別圖示和顏色一致
- ⭐ 介面響應速度快
- ⭐ 錯誤提示清楚
- ⭐ 支援特殊字元

---

## 🐛 問題回報格式

如果發現問題，請使用以下格式回報：

```
**問題描述**: [簡短描述問題]
**重現步驟**:
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]

**預期結果**: [應該發生什麼]
**實際結果**: [實際發生什麼]
**截圖**: [如果可能，請提供截圖]
**環境**: [瀏覽器、裝置等]
```

---

## 📝 測試報告模板

完成測試後，請使用以下模板記錄結果：

```markdown
# 統一類別管理系統測試報告

## 測試資訊
- 測試日期: [日期]
- 測試人員: [姓名]
- 測試環境: [瀏覽器/裝置]

## 測試結果摘要
- 通過測試: __/30
- 失敗測試: __/30
- 跳過測試: __/30

## 詳細結果
### 測試 1: 類別管理對話框
- [✅/❌] 1.1 開啟對話框
- [✅/❌] 1.2 查看預設類別
- [✅/❌] 1.3 新增支出類別
- [✅/❌] 1.4 新增收入類別
- [✅/❌] 1.5 刪除類別

[... 繼續填寫其他測試 ...]

## 發現的問題
1. [問題描述]
2. [問題描述]

## 建議改善
1. [建議內容]
2. [建議內容]

## 整體評價
[對系統的整體評價和建議]
```

---

## 🎉 測試完成

恭喜完成所有測試！如果所有必須通過的測試都通過了，系統就可以正式使用了！🚀

# 🎯 快速測試指南

## ⚠️ 重要發現

**您看到的「405 錯誤」實際上是「403 Forbidden - 認證問題」**

這表示：**您需要先登入應用程式！**

---

## ✅ 立即解決步驟 (2分鐘)

### Step 1: 確認登入 ⭐ 最重要！

1. **開啟應用程式**
   ```
   http://localhost:5000
   ```

2. **登入您的帳號**
   - 如果尚未登入，請先登入
   - 如果已登入但出現錯誤，請登出後重新登入

3. **確認登入成功**
   - 右上角應該顯示您的用戶資訊
   - 或者確認可以訪問其他需要登入的功能

### Step 2: 測試類別管理

1. **進入記帳簿頁面**

2. **點擊「管理」按鈕**

3. **查看結果**
   - ✅ 應該看到類別列表
   - ✅ 或看到「尚無XX類別，點擊上方按鈕新增」
   - ❌ 如果還是看到錯誤，請繼續下一步

### Step 3: 檢查錯誤訊息

1. **開啟瀏覽器開發者工具**
   - Windows/Linux: `F12` 或 `Ctrl+Shift+I`
   - Mac: `Cmd+Option+I`

2. **切換到 Console 頁籤**

3. **查看訊息**
   - 應該看到以下 debug 訊息：
   ```
   🔍 CategoryManagementDialog 狀態:
     activeTab: "expense"
     expenseCategories: [...]
     incomeCategories: [...]
     isLoading: false
     error: null
   ```

4. **如果看到錯誤**
   - 記下錯誤訊息
   - 截圖發送給我

---

## 🔍 診斷工具

如果問題持續，執行診斷腳本：

```bash
cd /Users/chiangpl/Downloads/TaiwanFinance
./diagnose.sh
```

**注意**: 診斷腳本可能會顯示 403，這是正常的（因為腳本無法模擬瀏覽器登入）。實際測試請在**瀏覽器**中進行。

---

## 📋 預期行為

### 登入前
- ❌ 無法訪問類別管理
- ❌ 看到 403 錯誤

### 登入後
- ✅ 可以開啟類別管理
- ✅ 看到現有類別列表（如果有資料）
- ✅ 可以新增/刪除類別

### 新增類別時
- ✅ 點擊「新增支出類別」
- ✅ **直接進入圖示選擇頁面**（不是選擇已有類別）
- ✅ 選擇圖示並輸入名稱
- ✅ 成功新增，自動分配顏色

---

## ❓ 如果還是有問題

請提供以下資訊：

### 1. Console 截圖
- 按 F12 開啟 DevTools
- 切換到 Console
- 截圖所有紅色錯誤訊息

### 2. Network 截圖
- 切換到 Network 頁籤
- 找到 `ledger-categories` 請求
- 點擊查看詳情
- 截圖 Headers 和 Response

### 3. 確認資訊
- [ ] 是否已登入？
- [ ] 右上角是否顯示用戶資訊？
- [ ] 其他功能是否正常？（例如新增記帳記錄）

### 4. 診斷腳本輸出
```bash
./diagnose.sh > diagnosis.txt
```
將 `diagnosis.txt` 內容發送給我

---

## 🎊 成功標準

當您完成以下操作時，表示功能正常：

- ✅ 登入成功
- ✅ 開啟類別管理對話框
- ✅ 看到現有類別（或「尚無類別」提示）
- ✅ 點擊「新增類別」直接進入圖示選擇
- ✅ 成功新增類別
- ✅ 成功刪除類別

---

## 📚 相關文件

- **TROUBLESHOOTING.md** - 詳細診斷指南
- **BUGFIX_REPORT.md** - 錯誤修復報告
- **TESTING_GUIDE.md** - 完整測試指南

---

**最重要的一步**: **請先確認已登入！** ⭐⭐⭐

大部分問題都是因為未登入或 Session 過期造成的。

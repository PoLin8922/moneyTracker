# 📊 MoneyTrack 投資組合支援市場

## 🌍 支援的全球市場

MoneyTrack 使用智能多源價格獲取策略，**只要 Yahoo Finance 有的市場都支援**！

---

## ✅ 已測試的市場

### 🇺🇸 美股 (US Stock Market)
**代碼格式:** 直接使用股票代碼

| 股票代碼 | 公司名稱 | 範例 |
|---------|---------|------|
| TSLA | Tesla | ✅ 支援 |
| AAPL | Apple | ✅ 支援 |
| NVDA | NVIDIA | ✅ 支援 |
| GOOGL | Google | ✅ 支援 |
| MSFT | Microsoft | ✅ 支援 |
| AMZN | Amazon | ✅ 支援 |

**使用方式:**
```
代碼: TSLA
名稱: Tesla
類型: 美股
```

---

### 🇹🇼 台股 (Taiwan Stock Market)
**代碼格式:** 
- 直接使用代碼：`2330`、`0050`
- 或加後綴：`2330.TW`、`0050.TW`

| 股票代碼 | 公司名稱 | Yahoo 格式 |
|---------|---------|-----------|
| 2330 | 台積電 | 2330.TW |
| 0050 | 元大台灣50 | 0050.TW |
| 2454 | 聯發科 | 2454.TW |
| 2317 | 鴻海 | 2317.TW |
| 2891 | 中信金 | 2891.TW |

**使用方式:**
```
代碼: 2330  或  2330.TW
名稱: 台積電
類型: 台股
```

**智能轉換:**
- 輸入 `2330` → 自動嘗試 `2330.TW`
- 輸入 `2330.TW` → 直接使用

---

### 🇭🇰 港股 (Hong Kong Stock Market)
**代碼格式:** `代碼.HK`

| 股票代碼 | 公司名稱 | 範例 |
|---------|---------|------|
| 0700.HK | 騰訊控股 | ✅ 支援 |
| 9988.HK | 阿里巴巴 | ✅ 支援 |
| 1810.HK | 小米集團 | ✅ 支援 |
| 0005.HK | 匯豐控股 | ✅ 支援 |

**使用方式:**
```
代碼: 0700.HK
名稱: 騰訊
類型: 港股
```

---

### 🇯🇵 日股 (Japan Stock Market)
**代碼格式:** `代碼.T`

| 股票代碼 | 公司名稱 | 範例 |
|---------|---------|------|
| 7203.T | Toyota | ✅ 支援 |
| 6758.T | Sony | ✅ 支援 |
| 9984.T | SoftBank | ✅ 支援 |
| 7974.T | Nintendo | ✅ 支援 |

**使用方式:**
```
代碼: 7203.T
名稱: Toyota
類型: 日股
```

---

### 🇨🇳 中國股市 (China Stock Market)

#### A股 (上海)
**代碼格式:** `代碼.SS`

| 股票代碼 | 公司名稱 |
|---------|---------|
| 600519.SS | 貴州茅台 |
| 600036.SS | 招商銀行 |
| 601318.SS | 中國平安 |

#### A股 (深圳)
**代碼格式:** `代碼.SZ`

| 股票代碼 | 公司名稱 |
|---------|---------|
| 000001.SZ | 平安銀行 |
| 000858.SZ | 五糧液 |

**使用方式:**
```
代碼: 600519.SS
名稱: 貴州茅台
類型: A股
```

---

### 💰 加密貨幣 (Cryptocurrency)
**代碼格式:** 
- 簡寫：`BTC`、`ETH`
- 完整格式：`BTC-USD`、`ETH-USD`

| 代碼 | 名稱 | Yahoo 格式 |
|------|------|-----------|
| BTC | Bitcoin | BTC-USD |
| ETH | Ethereum | ETH-USD |
| USDT | Tether | USDT-USD |
| BNB | Binance Coin | BNB-USD |
| SOL | Solana | SOL-USD |
| XRP | Ripple | XRP-USD |
| ADA | Cardano | ADA-USD |
| DOGE | Dogecoin | DOGE-USD |

**使用方式:**
```
代碼: BTC  或  BTC-USD
名稱: Bitcoin
類型: 加密貨幣
```

**智能轉換:**
- 輸入 `BTC` → 自動嘗試 `BTC-USD`
- 輸入 `BTC-USD` → 直接使用

**備用源:** 如果 Yahoo Finance 失敗，自動切換到 CoinGecko API

---

## 🌐 其他國際市場

只要在 Yahoo Finance 上找得到，MoneyTrack 都支援！

### 🇬🇧 英股
- **格式:** `代碼.L` (倫敦證交所)
- **範例:** `BP.L` (BP)、`HSBA.L` (匯豐)

### 🇰🇷 韓股
- **格式:** `代碼.KS` (韓國證交所)
- **範例:** `005930.KS` (三星電子)

### 🇩🇪 德股
- **格式:** `代碼.DE` (法蘭克福)
- **範例:** `VOW3.DE` (福斯汽車)

### 🇫🇷 法股
- **格式:** `代碼.PA` (巴黎)
- **範例:** `MC.PA` (LVMH)

### 🇮🇳 印股
- **格式:** `代碼.NS` (NSE) 或 `代碼.BO` (BSE)
- **範例:** `RELIANCE.NS` (Reliance Industries)

### 🇧🇷 巴西股
- **格式:** `代碼.SA`
- **範例:** `PETR4.SA` (Petrobras)

---

## 🔧 技術實現

### 智能多源策略

```
步驟 1: Yahoo Finance (主要源)
  ├─ 美股: 直接查詢 TSLA
  ├─ 台股: 查詢 2330.TW
  ├─ 加密貨幣: 查詢 BTC-USD
  └─ 其他: 使用原始代碼

步驟 2: 專用 API (備用源)
  ├─ 台股失敗 → 台灣證交所 API
  ├─ 加密貨幣失敗 → CoinGecko API
  └─ 其他市場 → 跳過

步驟 3: 原始格式重試
  └─ 直接用用戶輸入的代碼查詢 Yahoo
```

### 自動格式轉換

| 輸入 | 類型 | 自動轉換 | 查詢順序 |
|------|------|---------|---------|
| 2330 | 台股 | → 2330.TW | 1. 2330.TW<br>2. 2330.TWO<br>3. 2330 |
| BTC | 加密貨幣 | → BTC-USD | 1. BTC-USD<br>2. BTC |
| TSLA | 美股 | (無需轉換) | 1. TSLA |
| 0700.HK | 港股 | (無需轉換) | 1. 0700.HK |

---

## 📝 使用建議

### ✅ 推薦做法

1. **使用完整格式**
   ```
   台股: 2330.TW (而不是 2330)
   港股: 0700.HK
   日股: 7203.T
   ```
   → 更快、更準確

2. **查詢前先在 Yahoo Finance 確認**
   - 網址: https://finance.yahoo.com/
   - 搜尋你的股票
   - 使用網址中的代碼

3. **常見格式後綴**
   - 台灣: `.TW` 或 `.TWO`
   - 香港: `.HK`
   - 日本: `.T`
   - 中國: `.SS` (上海) 或 `.SZ` (深圳)
   - 英國: `.L`
   - 其他: 查 Yahoo Finance

### ⚠️ 注意事項

1. **交易時間限制**
   - Yahoo Finance 只在市場開盤時提供即時價格
   - 收盤後會顯示收盤價
   - MoneyTrack 每 10 秒更新一次

2. **代碼大小寫**
   - 股票代碼通常不區分大小寫
   - 建議使用大寫 (TSLA, BTC-USD)

3. **特殊字符**
   - 港股前導零必須保留: `0700.HK` (不是 `700.HK`)
   - 台股可省略: `2330` 或 `2330.TW` 都可以

---

## 🧪 測試工具

想測試某個市場是否支援？可以：

1. **手動測試**
   - 在投資組合中新增一筆交易
   - 輸入股票代碼
   - 等待 10 秒自動更新
   - 檢查是否有價格

2. **查看後端日誌**
   ```
   🔍 Fetching price for 2330 (台股)...
   📊 Strategy 1: Trying Yahoo Finance for 2330...
   ✅ Yahoo Finance: 2330.TW = $1450
   ```

3. **使用 testPriceApis() 函數**
   - 後端啟動時會自動測試多個市場
   - 查看 console 輸出

---

## 💡 常見問題

### Q: 我的股票找不到價格怎麼辦？
**A:** 
1. 先在 Yahoo Finance 搜尋你的股票
2. 確認代碼格式（可能需要加後綴）
3. 使用 Yahoo Finance 顯示的完整代碼

### Q: 為什麼有些股票更新慢？
**A:**
1. 市場可能休市（週末、節假日）
2. 流動性低的股票更新頻率較低
3. Yahoo Finance API 可能有延遲

### Q: 可以支援 OTC/未上市股票嗎？
**A:** 
只要 Yahoo Finance 有就支援。但 OTC 市場價格可能不準確或更新慢。

### Q: 加密貨幣為什麼有兩個價格源？
**A:** 
- Yahoo Finance (主要): 通常更快
- CoinGecko (備用): 更全面，支援更多幣種

### Q: 我想加入新的市場怎麼辦？
**A:** 
MoneyTrack 已經支援 Yahoo Finance 的所有市場，無需額外設定！

---

## 🚀 總結

**MoneyTrack 的市場支援哲學：**
> 只要 Yahoo Finance 能查到，我們就能支援！

**已驗證支援:**
- ✅ 美股、台股、港股、日股
- ✅ 中國 A 股
- ✅ 主流加密貨幣
- ✅ 歐洲主要市場
- ✅ 亞洲新興市場

**理論支援:**
- 🌍 Yahoo Finance 覆蓋的所有市場
- 📈 超過 37 個國家的股市
- 💰 數千種加密貨幣

---

**版本:** 2.0 (自動價格同步系統)  
**最後更新:** 2025-10-23

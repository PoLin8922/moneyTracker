# 顏色系統更新指南 V2 - 淡雅色系 (50色)

## 🎨 更新內容

### 1. 新的 50 色淡雅色系
- **飽和度**: 45-65% (之前是 65-90%)
- **亮度**: 65-75% (之前是 45-63%)
- **顏色數量**: 50色 (之前是 20色)
- **風格**: 淡雅、柔和、易於區分

### 2. 雙色系統設計

#### 淡雅色 (CATEGORY_COLORS) - 用於一般顯示
- **用途**: 類別標籤、圖標背景、卡片背景
- **特性**: 低飽和度、高亮度，視覺舒適
- **文件**: `client/src/lib/categoryColors.ts`

#### 飽和色 (SATURATED_COLORS) - 僅用於進度條
- **用途**: 圖表中「已使用金額」的進度條
- **特性**: 高飽和度 (80-90%)、中等亮度 (45-60%)
- **對應**: 每個淡雅色都有對應的飽和色 (相同 index)

### 3. 應用場景

| 組件 | 使用顏色 | 說明 |
|------|---------|------|
| 類別圖標盒子 | 淡雅色 | 8x8 圓角盒子 + 白色圖標 |
| 分類圓餅圖 | 淡雅色 | 整體視覺更柔和 |
| 預算背景條 | 淡雅色 (25% opacity) | 總預算參考線 |
| 已使用進度條 | **飽和色 (95% opacity)** | 突出顯示已使用金額 |
| 百分比文字 | 飽和色 | 與進度條顏色一致 |

## 📋 執行步驟

### 步驟 1: 在 Neon Console 執行 SQL
1. 前往 Neon Console: https://console.neon.tech
2. 選擇你的專案和資料庫
3. 打開 SQL Editor
4. 複製並執行以下 SQL:

```sql
-- 從 migrations/UPDATE_COLORS_V2.sql 複製完整內容
-- 這會更新所有現有類別的顏色為淡雅色系
```

### 步驟 2: 驗證更新結果
執行以下查詢檢查顏色是否正確更新:

```sql
-- 檢查預算類別
SELECT name, color FROM budget_categories ORDER BY created_at;

-- 檢查存錢罐類別
SELECT name, color FROM savings_jar_categories ORDER BY created_at;
```

應該看到：
- 每個類別都有不同的 HSL 顏色
- 飽和度範圍: 45-65%
- 亮度範圍: 65-75%
- 顏色格式: `hsl(220, 65%, 70%)`

### 步驟 3: 重新整理前端
在瀏覽器中重新整理應用程式即可看到新的淡雅色系。

## ✨ 視覺效果對比

### 之前 (高飽和度)
```
背景: hsl(220, 88%, 63%) opacity 0.15 → 過於鮮豔
進度: hsl(220, 88%, 63%) opacity 0.9  → 過於鮮豔
```

### 現在 (淡雅 + 飽和雙系統)
```
背景: hsl(220, 65%, 70%) opacity 0.25 → 柔和舒適
進度: hsl(220, 88%, 55%) opacity 0.95 → 鮮明突出
```

## 🎯 設計理念

1. **視覺舒適**: 淡雅色減少視覺疲勞，適合長時間查看
2. **資訊層次**: 飽和色僅用於重要數據（已使用金額），建立視覺焦點
3. **顏色豐富**: 50 種不同色調，大幅減少顏色重複機率
4. **主題協調**: 色輪起始於 220° (藍色)，與應用主題色一致

## 🔧 技術細節

### 顏色分配邏輯
```typescript
// 淡雅色 - 一般顯示
const mutedColor = item.color; // 來自資料庫

// 飽和色 - 進度條
const colorIndex = CATEGORY_COLORS.indexOf(item.color);
const saturatedColor = getSaturatedColor(colorIndex);
```

### 背景 vs 進度條
```typescript
// 背景（總預算）- 淡雅
backgroundColor: mutedColor,
opacity: 0.25

// 進度（已使用）- 飽和
backgroundColor: saturatedColor,
opacity: 0.95
```

## ❓ 常見問題

### Q: 為什麼需要兩套顏色？
A: 淡雅色提供舒適的背景，飽和色讓進度條更突出，形成清晰的視覺層次。

### Q: 如何確保顏色對應？
A: 使用相同的 index，例如 CATEGORY_COLORS[5] 和 SATURATED_COLORS[5] 是同一色調的不同飽和度版本。

### Q: 如果類別超過 50 個？
A: 使用 modulo 運算 (% 50)，顏色會循環使用，但 50 色已足夠大部分使用場景。

### Q: 能否調整飽和度？
A: 可以，在 `categoryColors.ts` 中修改 HSL 的第二個參數（飽和度）。

## 📊 色輪設計

50 色均勻分布在色輪上，確保相鄰類別顏色差異明顯：

```
輪 1 (10色): 220° → 200° → 180° → ... → 0°
輪 2 (10色): 340° → 320° → ... → 50°
輪 3 (10色): 215° → 195° → ... → 345°
輪 4 (10色): 225° → 205° → ... → 5°
輪 5 (10色): 230° → 250° → ... → 70°
```

## 🚀 下次更新建議

如果未來需要更多顏色或不同風格：
1. 調整 `CATEGORY_COLORS` 陣列
2. 對應更新 `SATURATED_COLORS` 陣列
3. 更新 `UPDATE_COLORS_V3.sql`
4. 在 Neon Console 執行新的 SQL
